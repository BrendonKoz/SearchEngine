{"version":3,"sources":["src/Core.js","src/Tabs.js","main.js"],"names":["PWSE_Core","document","addEventListener","window","SearchEngine","dispatchEvent","CustomEvent","PWSE_Tabs","tabsParent","rememberActiveTab","tabContainers","querySelectorAll","length","forEach","tabContainer","tablist","querySelector","tabs","panels","currentTabNum","currentTabID","tabStash","localStorage","getItem","JSON","parse","hasOwnProperty","getAttribute","switchTab","oldTab","newTab","focus","removeAttribute","setAttribute","index","Array","prototype","indexOf","call","oldIndex","hidden","closest","setItem","stringify","tab","i","parentNode","e","preventDefault","currentTab","currentTarget","dir","which","panel","id","Tabs"],"mappings":"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","file":"main.js","sourceRoot":"..","sourcesContent":["/**\n * SearchEngine JS Core\n *\n * @version 0.1.1\n */\nclass PWSE_Core {\n\n    /**\n     * Constructor\n     */\n    constructor() {}\n\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    window.SearchEngine = new PWSE_Core();\n    document.dispatchEvent(new CustomEvent('SearchEngineConstructed'));\n});\n","/**\n * SearchEngine JS Tabs\n *\n * Based on https://inclusive-components.design/tabbed-interfaces/.\n *\n * @version 0.1.1\n */\nclass PWSE_Tabs {\n\n    /**\n     * Init method\n     *\n     * @param {?Object} tabsParent Optional parent node for tabs.\n     * @param {Boolean} rememberActiveTab Remember active tab?\n     */\n    init(tabsParent = null, rememberActiveTab = true) {\n\n        // find tab containers\n        let tabContainers = [];\n        tabsParent = typeof tabsParent === 'Object' ? tabsParent : document;\n        tabContainers = tabsParent.querySelectorAll('.pwse-tabs');\n        if (!tabContainers.length) return;\n\n        tabContainers.forEach(tabContainer => {\n\n            // get relevant elements and collections\n            const tablist = tabContainer.querySelector('[role=\"tablist\"]');\n            const tabs = tablist.querySelectorAll('[role=\"tab\"]');\n            const panels = tabContainer.querySelectorAll(':scope > [role=\"tabpanel\"]');\n\n            // get tab stash from localStorage\n            let currentTabNum = 0;\n            let currentTabID = null;\n            if (rememberActiveTab) {\n                let tabStash = localStorage.getItem('pwse-tabs');\n                tabStash = tabStash ? JSON.parse(tabStash) : {};\n                if (tabStash.hasOwnProperty(tabContainer.getAttribute('id'))) {\n                    currentTabID = tabStash[tabContainer.getAttribute('id')];\n                }\n            }\n\n            // the tab switching function\n            const switchTab = (oldTab, newTab) => {\n                newTab.focus();\n                // Make the active tab focusable by the user (Tab key)\n                newTab.removeAttribute('tabindex');\n                // Set the selected state\n                newTab.setAttribute('aria-selected', 'true');\n                oldTab.removeAttribute('aria-selected');\n                oldTab.setAttribute('tabindex', '-1');\n                // Get the indices of the new and old tabs to find the correct\n                // tab panels to show and hide\n                let index = Array.prototype.indexOf.call(tabs, newTab);\n                let oldIndex = Array.prototype.indexOf.call(tabs, oldTab);\n                panels[oldIndex].hidden = true;\n                panels[index].hidden = false;\n                if (rememberActiveTab) {\n                    let tabStash = localStorage.getItem('pwse-tabs');\n                    tabStash = tabStash ? JSON.parse(tabStash) : {};\n                    tabStash[newTab.closest('.pwse-tabs').getAttribute('id')] = newTab.getAttribute('id');\n                    localStorage.setItem('pwse-tabs', JSON.stringify(tabStash));\n                }\n            }\n\n            // add the tablist role to the first <ul> in the tab container\n            tablist.setAttribute('role', 'tablist');\n\n            // add semantics are remove user focusability for each tab\n            Array.prototype.forEach.call(tabs, (tab, i) => {\n                tab.setAttribute('role', 'tab');\n                tab.setAttribute('id', tabContainer.getAttribute('id') + '-' + (i + 1));\n                tab.setAttribute('tabindex', '-1');\n                tab.parentNode.setAttribute('role', 'presentation');\n\n                // check if this tab should be activated by default\n                if (rememberActiveTab && currentTabID === tab.getAttribute('id')) {\n                    currentTabNum = i;\n                }\n\n                // handle clicking of tabs for mouse users\n                tab.addEventListener('click', e => {\n                    e.preventDefault();\n                    let currentTab = tablist.querySelector('[aria-selected]');\n                    if (e.currentTarget !== currentTab) {\n                        switchTab(currentTab, e.currentTarget);\n                    }\n                });\n\n                // handle keydown events for keyboard users\n                tab.addEventListener('keydown', e => {\n                    // get the index of the current tab in the tabs node list\n                    let index = Array.prototype.indexOf.call(tabs, e.currentTarget);\n                    // work out which key the user is pressing and\n                    // calculate the new tab's index where appropriate\n                    let dir = e.which === 37 ? index - 1 : e.which === 39 ? index + 1 : e.which === 40 ? 'down' : null;\n                    if (dir !== null) {\n                        e.preventDefault();\n                        // if the down key is pressed, move focus to the open panel,\n                        // otherwise switch to the adjacent tab\n                        dir === 'down' ? panels[i].focus() : tabs[dir] ? switchTab(e.currentTarget, tabs[dir]) : void 0;\n                    }\n                });\n            });\n\n            // add tab panel semantics and hide them all\n            Array.prototype.forEach.call(panels, (panel, i) => {\n                panel.setAttribute('role', 'tabpanel');\n                panel.setAttribute('tabindex', '-1');\n                panel.setAttribute('aria-labelledby', tabs[i].id);\n                panel.hidden = true;\n            });\n\n            // activate current tab and reveal related tab panel\n            tabs[currentTabNum].removeAttribute('tabindex');\n            tabs[currentTabNum].setAttribute('aria-selected', 'true');\n            panels[currentTabNum].hidden = false;\n        })\n    }\n\n}\n\ndocument.addEventListener(\"SearchEngineConstructed\", function() {\n    window.SearchEngine.Tabs = new PWSE_Tabs();\n});\n","import './src/Core.js'\nimport './src/Tabs.js'\n"]}